<% if error = flash[:error] %>
  <div class="mb-4 p-3 bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 rounded text-red-600 dark:text-red-400 text-sm">
    <%= error %>
  </div>
<% end %>

<% if notice = flash[:notice] %>
  <div class="mb-4 p-3 bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800 rounded text-green-600 dark:text-green-400 text-sm">
    <%= notice %>
  </div>
<% end %>

<h1 class="text-xl font-semibold text-primary mb-6">Create account</h1>

<%= app_form_for(:registration, url: routes.path(:create_registration), method: :post) do |form| %>
  <%= form.label :invite_code, "Invite Code" %>
  <%= form.text_field :invite_code,
      required: true,
      autofocus: invite_code.nil? ? true : false,
      placeholder: "XXXX-XXXX-XXXX",
      value: invite_code,
      class: "mb-4" %>

  <%= form.label :name, "Name" %>
  <%= form.text_field :name,
      required: true,
      autofocus: invite_code.nil? ? false : true,
      autocomplete: "name",
      value: values[:registration][:name],
      placeholder: "Janet Appleton",
      class: "mb-4" %>

  <%= form.label :username, "Username" %>
  <%= form.text_field :username,
      required: true,
      autocomplete: "name",
      placeholder: "jappleton",
      value: values[:registration][:username],
      class: "mb-2" %>
    <div class="text-xs text-secondary mb-4">Your username will be used in your profile URL. <code><pre>https://forked.sh/username</pre></code></div>

  <%= form.label :email_address, "Email" %>
  <%= form.email_field :email_address,
      required: true,
      autocomplete: "email",
      placeholder: "Enter your email",
      value: values[:registration][:email_address],
      class: "mb-4" %>

  <%= form.label :password, "Password" %>
  <%= form.password_field :password,
      required: false,
      autocomplete: "new-password",
      placeholder: "Enter your password",
      maxlength: 72,
      class: "mb-4" %>

  <div class="pt-2">
    <%= form.submit "Create account", class: "w-full mb-4" %>
  </div>

  <div class="text-center pt-2">
    <%= link_to "Already have an account?", routes.path(:new_session),
        class: "text-stone-600 dark:text-stone-400 hover:text-black dark:hover:text-stone-100 text-sm" %>
  </div>
<% end %>
